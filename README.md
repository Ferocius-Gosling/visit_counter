## Счётчик посещений.
API для отслежевания посещений сайта, с выводом соответсвующей статистики.

#### Установка:
```bash
git clone https://github.com/Ferocius-Gosling/visit_counter.git
# установка зависимостей
pip install -r requirements.txt 
```
- если планируется использование sql-хранилища, необходимо предварительно создать
базу данных с двумя таблицами 'count_visits' и 'user_visits'


- содержимое таблицы `count_visits`
- столбцы total, daily, monthly, yearly, last_id должны иметь тип int
- столбцы domain и last_visit должны иметь тип varchar

| total | daily | monthly | yearly | last_id | domain | last_visit |
|-------|-------|---------|--------|---------|--------|------------| 

- содержимое таблицы `user_visits`
- все столбцы должны иметь тип varchar

| path | id | date | user_agent | domain |
|------|----|------|------------|--------| 

#### Для запуска:
- python web.py [--host, --port, --debug, --help, --storage]
- "--help" выводит справку.
- "--storage" устанавливает тип используемого хранилища. Принимает значения 
sql(по умолчанию) и file.
- --host, --port, позволяют сконфигурировать настройки web-сервера.
- --debug, включает/выключает режим отладки. По умолчанию отключен.

### API 

Приложение запускает Web-сервер на Flask, и обрабатывает посещения клиента на хост.
Например, при посещении пользователем страницы /stats, на стороне клиента выполняется
скрипт, выставляющий cookie user_id, и отправляющий POST-запрос на сервер, где его
обрабатывает страница /visit, которая выполняет инкремент посещения и записывает
данные полученные от пользователя. Данные о посещении хранятся в выбранном хранилище.